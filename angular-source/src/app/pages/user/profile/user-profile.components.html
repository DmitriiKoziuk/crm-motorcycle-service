<div class="page-title-box">
  <span>
    {{title}}
  </span>
</div>
<div class="container">
  <div class="row">
    <div class="col">
      <form [formGroup]="userRecord.attributes" class="mat-elevation-z8">
        <div class="row">
          <div class="col-md-6">
            <h4>User</h4>
            <mat-form-field>
              <input matInput placeholder="Username" formControlName="username">
              <mat-error *ngIf="userRecord.isAttributeNotValid('username')">
                {{userRecord.getAttributeError('username')}}
              </mat-error>
              <mat-hint align="end">{{userRecord.attributes.get('username').value.length}} / {{userRecord.maxLength}}</mat-hint>
            </mat-form-field>

            <mat-form-field>
              <input matInput placeholder="Password" formControlName="password">
              <mat-error *ngIf="userRecord.isAttributeNotValid('password')">
                {{userRecord.getAttributeError('password')}}
              </mat-error>
              <mat-hint align="end">{{userRecord.attributes.get('password').value.length}} / {{userRecord.maxLength}}</mat-hint>
            </mat-form-field>

            <div formGroupName="role">
              <mat-form-field>
                <mat-select placeholder="Role" formControlName="name">
                  <mat-option *ngFor="let role of roles" value="{{role.name}}">{{role.name}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>

          <div class="col-md-6">
            <div formGroupName="profile">
              <h4>Contact data</h4>
              <mat-form-field>
                <input matInput placeholder="First name" formControlName="first_name">
              </mat-form-field>

              <mat-form-field>
                <input matInput placeholder="Family name" formControlName="family_name">
              </mat-form-field>

              <mat-form-field>
                <input matInput placeholder="Middle name" formControlName="middle_name">
              </mat-form-field>

              <mat-form-field>
                <input matInput placeholder="Telephone number" formControlName="telephone_number">
              </mat-form-field>
            </div>
          </div>

          <div class="col-md-12">
            <button mat-raised-button [disabled]="userRecord.isNotValid() || userRecord.isAttributeNotChanged()" color="primary" (click)="userRecord.save()">Save</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>